@let ion = ionIn();
<p-card
  class="bg-gray-800 border border-gray-700 text-white overflow-hidden md:w-80">
<!--  [style]="{ width: '25rem', overflow: 'hidden' }"-->
<!--  <ng-template #header>-->
<!--    <p class="font-medium text-gray-500">{{ion.getUUID()}}</p>-->
<!--  </ng-template>-->

  <!-- NAME & CHARGE -->
  <ng-template #title>
    <div class="mb-2 flex flex-row justify-start items-center-safe gap-4">
      <input
        type="text"
        pInputText
        [ngModel]="ion.getName()"
        (ngModelChange)="ion.setName($event)"
        placeholder="Nome dello ione"
        class="w-full"
      />
    </div>
    <div class="mb-2 mt-2 flex flex-row flex-wrap justify-between items-center-safe">
      <p>Carica:</p>
      <p-selectbutton
        [options]="chargeOptions"
        (onChange)="ion.setCharge($event.value)"
        [ngModel]="ion.getCharge()"
      />
    </div>
  </ng-template>

  <!-- PERMEABILITY -->
  <ng-template #content>
    <div class="mb-2 mt-2">
      <p>Permeabilità ione:</p>
      <div class="flex flex-row flex-wrap justify-items-center items-center gap-4 pt-4">
        <p-slider
          (onChange)="ion.setPermeability($event.value || 0)"
          [ngModel]="ion.getPermeability()"
          style="width: 100%"
          [min]="PERMEABILITY_MIN_VALUE"
          [max]="PERMEABILITY_MAX_VALUE"
        />
        <p-inputnumber
          [showButtons]="true"
          buttonLayout="horizontal"
          spinnerMode="vertical"
          inputId="vertical"
          [inputStyle]="{ width: '4rem' }"
          [min]="PERMEABILITY_MIN_VALUE"
          [max]="PERMEABILITY_MAX_VALUE"ù
          [ngModel]="ion.getPermeability()"
          (onInput)="ion.setPermeability(parseFloat($event.value?.toString() || '0') || 0)"
        >
          <ng-template #incrementbuttonicon>
            <span class="pi pi-plus"></span>
          </ng-template>
          <ng-template #decrementbuttonicon>
            <span class="pi pi-minus"></span>
          </ng-template>
        </p-inputnumber>
      </div>
    </div>

    <!-- CONCENTRATION IN -->
    <div class="mb-2">
      <p>Concentrazione In:</p>
      <div class="flex flex-row flex-wrap justify-items-center items-center gap-4 pt-4">
        <p-slider
          (onChange)="ion.setConcentrationIn($event.value || 0)"
          [ngModel]="ion.getConcentrationIn()"
          style="width: 100%"
          [min]="CONC_IN_MIN_VALUE"
          [max]="CONC_IN_MAX_VALUE"
        />
        <p-inputnumber
          [ngModel]="ion.getConcentrationIn()"
          (onInput)="ion.setConcentrationIn(parseFloat($event.value?.toString() || '0') || 0)"
          [showButtons]="true"
          buttonLayout="horizontal"
          spinnerMode="vertical"
          inputId="vertical"
          [inputStyle]="{ width: '4rem' }"
          [min]="CONC_IN_MIN_VALUE"
          [max]="CONC_IN_MAX_VALUE"
        >
          <ng-template #incrementbuttonicon>
            <span class="pi pi-plus"></span>
          </ng-template>
          <ng-template #decrementbuttonicon>
            <span class="pi pi-minus"></span>
          </ng-template>
        </p-inputnumber>
      </div>
    </div>

    <!-- CONCENTRATION OUT -->
    <div class="mb-2">
      <p>Concentrazione Out: </p>
      <div class="flex flex-row flex-wrap justify-items-center items-center gap-4 pt-4">
        <p-slider
          (onChange)="ion.setConcentrationOut($event.value || 0)"
          [ngModel]="ion.getConcentrationOut()"
          style="width: 100%"
          [min]="CONC_OUT_MIN_VALUE"
          [max]="CONC_OUT_MAX_VALUE"
        />
        <p-inputnumber
          [ngModel]="ion.getConcentrationOut()"
          (onInput)="ion.setConcentrationOut(parseFloat($event.value?.toString() || '0') || 0)"
          [showButtons]="true"
          buttonLayout="horizontal"
          spinnerMode="vertical"
          inputId="vertical"
          [inputStyle]="{ width: '4rem' }"
          [min]="CONC_OUT_MIN_VALUE"
          [max]="CONC_OUT_MAX_VALUE"
        >
          <ng-template #incrementbuttonicon>
            <span class="pi pi-plus"></span>
          </ng-template>
          <ng-template #decrementbuttonicon>
            <span class="pi pi-minus"></span>
          </ng-template>
        </p-inputnumber>
      </div>
    </div>
  </ng-template>

  <ng-template #footer>
    <div class="mt-1 flex justify-end">
      <p-button label="Rimuovi" severity="secondary" (onClick)="ghkSrv.removeIon(ion)"/>
    </div>
  </ng-template>
</p-card>
